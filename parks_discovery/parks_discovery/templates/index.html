<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Parks Discovery</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position: absolute; top: 0px; bottom: 0px; width:  100%; }
  .searchFormDiv { z-index: 5000; position: absolute; bottom: 90px; width: 340px; height: 35px; left:35%;right:20%; padding: 10px; background-color: #7E7E7E; color:white;opacity: .85;border-radius: 20px;}
  .searchForm {position: relative; width:320px; margin-left:auto; margin-right:auto;padding: 4px;margin: 4px;}
</style>
</head>
<body>

<div class="searchFormDiv">
  <form method="post" class="searchForm">
      {% csrf_token %}
      {{ form }}
      <input type="submit" value="Search" />
  </form>
</div>

<div id='map'></div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoicGhyZW5jaHBocnkxMSIsImEiOiJjaWxmbmd3M3kxdXg0dHZrcG1iMG1temFpIn0.80STPODwSRA9mwAlEHOaUQ';
var map = L.mapbox.map('map', 'mapbox.streets')
   .setView([37.773972, -122.431297], 14); // Center of San Francisco
{% for park in parks.all %}
    L.mapbox.featureLayer({
        // this feature is in the GeoJSON format: see geojson.org
        // for the full specification
        type: 'Feature',
        geometry: {
            type: 'Point',
            // coordinates here are in longitude, latitude order because
            // x, y is the standard for GeoJSON and many formats
            coordinates: [
              {{ park.longitude }},
              {{ park.latitude }}
            ]
        },
        properties: {
            title: "{{ park.name }}",
            // https://www.mapbox.com/guides/an-open-platform/#simplestyle
            'marker-size': 'large',
            'marker-color': '#BE9A6B',
            'marker-symbol': 'park'
        }
    }).addTo(map);
{% endfor %}

</script>
</body>
</html>










