<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Single marker</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<div id='map'></div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoicGhyZW5jaHBocnkxMSIsImEiOiJjaWxmbmd3M3kxdXg0dHZrcG1iMG1temFpIn0.80STPODwSRA9mwAlEHOaUQ';
var map = L.mapbox.map('map', 'mapbox.streets')
   .setView([37.773972, -122.431297], 14); //37.773972, and the longitude is -122.431297

{% for park in parks.all %}
	L.mapbox.featureLayer({
	    // this feature is in the GeoJSON format: see geojson.org
	    // for the full specification
	    type: 'Feature',
	    geometry: {
	        type: 'Point',
	        // coordinates here are in longitude, latitude order because
	        // x, y is the standard for GeoJSON and many formats
	        coordinates: [
	          {{ park.longitude }},
	          {{ park.latitude }}
	        ]
	    },
	    properties: {
	        title: "{{ park.name }}",
	        // description: '1718 14th St NW, Washington, DC',
	        // one can customize markers by adding simplestyle properties
	        // https://www.mapbox.com/guides/an-open-platform/#simplestyle
	        'marker-size': 'large',
	        'marker-color': '#BE9A6B',
	        'marker-symbol': 'park'
	    }
	}).addTo(map);
	console.log("{{ park.name }}");
{% endfor %}
// handler = Gmaps.build('Google');
// handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
//   var locMarkers = [];

//   {% for park in parks.all %}
//     locMarkers.push({
//       lat: {{ park.latitude }}, 
//       lng: {{ park.latitude }},
//       infowindow: "{{ park.name }}"
//     });
//   {% endfor %}

//   markers = handler.addMarkers(locMarkers)
 
//   handler.map.centerOn(markers[0]);

//    handler.getMap().setZoom(15);
// });

</script>
</body>
</html>










